version: '3.8'

services:
  knowseek-app:
    build: .
    container_name: knowseek-springboot
    ports:
      - "8181:8181"
    env_file:
      - .env
    environment:
      - SPRING_PROFILES_ACTIVE=prod
      - TZ=Asia/Shanghai
    volumes:
      # 日志挂载路径
      - /data/project/knowseek/backend/logs:/app/logs
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "10m"    # 每个日志文件最大 10MB
        max-file: "3"      # 最多保留 3 个文件